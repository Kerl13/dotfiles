#!/bin/sh


DATADIR="$HOME/.local/opt/ocaml-init"
TEMPLATE="$DATADIR/template"


usage () {
  echo "usage: $0 DIR"
}

is_empty () {
  [ "$(find "$1" -path '*/*' -prune)" = "" ]
}


# Argument required
if [ "_$1" = "_" ]; then
  usage
  exit 1
else
  DIR="$1"
fi

# Argument must not exist or be an empty directory
if [ -e "$DIR" ]; then
  if ! t -d "$DIR" -a is_empty "$DIR" ; then
    echo "Directory $DIR not empty"
    exit 1
  fi
else
  mkdir "$DIR"
fi

# Copy files from the template directoty
cp -r "$TEMPLATE/"* "$DIR/"
